<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8" />
<title>masterMaintenanceOfStatus</title>
<style type="text/css">
.input {
	float: left;
	margin: 10px;
}
</style>

<script type="text/javascript">
	function submitAction(url) {
		document.User.action = '/maintenance/user' + url;
		document.User.submit();
	}
</script>
</head>
<body>
	<h2>マスタメンテナンス</h2>
	<div class="input">
		<p>社員マスタ</p>
		<form th:name="User" th:action="@{/maintenance/user/sarch}"
			th:object="${User}" th:method="post">
			<input type="text" name="sarchWord" th:value="${userArray}">
			<input type="checkbox" value="0"
				th:checked="${User.authorityInt == 0}" th:field="*{authorityInt}">管理者
			<input type="checkbox" value="1"
				th:checked="${User.authorityInt == 1}" th:field="*{authorityInt}">一般
			<input type="checkbox" value="0" th:field="*{status}">無効ユーザーを除く

			<button id="sarchButton" type="button"
				onclick="submitAction('/sarch')">検索</button>
			<br>

			<button id="updateButton" type="button"
				onclick="submitAction('/update')">一括変更</button>
			<table border=1>
				<tr>
					<td>ユーザ―名</td>
					<td>姓</td>
					<td>名</td>
					<td>権限</td>
					<td>有効/無効</td>
				</tr>
				<tr th:each="usr: ${usrList}" id="user">
					<td><input id="username" th:name="username"
						th:value="${usr.username}" onChange="alertValue(this)"> <input
						type="hidden" th:name="password" th:value="${usr.password}">
						<input type="hidden" th:name="id" th:value="${usr.id}"></td>
					<td><input id="lastName" th:name="lastName"
						th:value="${usr.lastName}" onChange="alertValue(this)"></td>
					<td><input id="firstName" th:name="firstName"
						th:value="${usr.firstName}" onChange="alertValue(this)"></td>
					<td><div th:if="${usr.authority.name() == 'ROLE_ADMIN'}">
							<select name="authority" id="authority">
								<option value="ROLE_ADMIN" selected>管理者</option>
								<option value="ROLE_USER">一般</option>
							</select>
						</div>
						<div th:if="${usr.authority.name() == 'ROLE_USER'}">
							<select name="authority" id="authority">
								<option value="ROLE_ADMIN">管理者</option>
								<option value="ROLE_USER" selected>一般</option>
							</select>
						</div></td>

					<td>
						<div th:if="${usr.status == 0}">
							<input type="hidden" id="statusBoolean" name="statusBoolean" value="0">
							<input type="checkbox" id="checkbox" name="status" checked
								value="0" onchange="buttonCheck()">無効
						</div>
						<div th:if="${usr.status == 1}">
							<input type="hidden" id="statusBoolean" name="statusBoolean" value="1">
							<input type="checkbox" id="checkbox" name="status" value="1"
								onchange="buttonCheck()">無効
						</div>
					</td>
				</tr>
			</table>
		</form>
	</div>


	<div class="input">
		<label>csv取込</label>
		<form name="uploadForm" th:action="@{/maintenance/user/upload}"
			method="post" enctype="multipart/form-data">
			<input type="file" name="userlist.csv" /><br />
			<button type="submit">upload</button>

		</form>
	</div>
</body>
</html>